# [HDC2021技术分论坛：盘点分布式软总线数据传输技术中的黑科技][https://mp.weixin.qq.com/s/0r0J6ifIkXGlf8qp0TlgDg]

随着万物互联时代的到来，特别是大量媒体资源的涌入和使用，用户对传输的要求不断提高，怎样的传输技术才能满足未来的用户需求呢？ 

在万物互联、多设备协同的新场景下，业界通用的OSI模型在满足用户对传输的高要求方面显得力有未逮。寻求一种极致的传输技术势在必行，这也成为分布式软总线的一项重要任务。

下面让我们先从“超级终端”新场景视角分析OSI模型，然后一一介绍分布式软总线的数据传输技术中的黑科技。





**一、“超级终端”新场景视角看OSI模型**



开放系统互联通信参考模型（Open System Interconnection Reference Model，简称OSI模型）是一个试图使世界范围各种计算机互联为网络的标准框架。OSI模型并没有提供一个可以实现的方法，而是描述了一些概念，用来协调进程间通信标准的制定。这一模型定义了网络互连的七层框架（物理层、数据链路层、网络层、传输层、会话层、表示层和应用层）。通常也将会话层、表示层和应用层合并为一层，统称为应用层。

OSI模型适用于将不同型号的计算机互连成一个单一的网络，它极大地推动了网络标准化的进程。然而随着鸿蒙生态的急速拓展，越来越多不同类型设备连接在一起形成“超级终端”， OSI模型已无法支持这样新场景下的数据传输要求。

比如生活中，我们经常看到Wi-Fi版本标称最大可达几百至上千兆带宽，这么高的带宽真的是用户实际使用带宽吗？事实上，Wi-Fi的最大带宽和用户使用带宽是两回事，这其中也隐含着以OSI为原型的网络模型的些许不足之处。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

图1 超级终端新场景下OSI模型

在应用层，设备接入数量、接入信道以及信号强度和干扰等均会影响传输效率。在应用层以下，各层协议数据存在大量数据开销，同时MAC报文传输过程耗时也较大。在物理层，器件规格和协议规格也直接影响着带宽的理论上限。这些问题从本质上是没有对时间和空间资源进行高效利用，没有发挥资源的最大化使用价值。如何解决现有模型的不足之处，实现时间和空间等资源的最大化利用，成为新一代数据传输技术的重要突破点。





**二、分布式软总线数据传输技术中的黑科技**



与传统P2P（point-to-point，点对点）传输有着较大不同，多设备场景下资源可调度、可利用空间更加广阔。朝着“超级终端”多设备资源最大化利用的目标，分布式软总线数据传输技术推出了三项黑科技，铸造极致的传输能力和体验。

**1. 多径传输技术（Multi-Path Transport）**

近年来，高清音视频、动画等多媒体资源日益增长，实现通用高效率文件传输成为一项极其重要的需求。然而传统的文件传输，往往依赖一条链路直接进行传输。文件的传输效率完全依赖链路本身的传输能力，鲁棒性和传输效率均不足。

为了适应新互联时代的需求，实现高效率文件传输，分布式软总线多径传输技术应运而生。多径传输技术基本思路是最大化利用不同路径的传输能力，原本一条链路上的文件传输，通过文件分割，将分割后的文件不同部分从多条路径进行传输，最终在目标侧聚合成原有文件。通过智能均衡不同链路的传输负载，实现了对文件的分割和传输，能力强的链路多分些文件占比，能力弱的少分些文件占比，甚至可以不分。这样就实现了文件的高效快速传输，给用户带来不一样的快速传输体验。

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

图2 多路径传输文件

**2. 智能时延控制技术（Intelligent Latency Control）**

在网络传输过程中，很大一块开销是序列化和协议编码占据的。进一步优化这部分开销，对传输时延和空间资源有着重要意义。智能时延控制技术正是通过智能序列化技术和极简传输协议两项重要子技术，实现了序列化和协议编码的极大压缩。

**（1）智能序列化技术（Intelligent Serialization）**

在RPC（remote procedure call，远程过程调用）通信流程中，百KB级别的RPC消息序列化需要计算侧耗时4~5ms，网络侧耗时约10~15ms，系统加速比低，严重影响了系统的运行性能。

智能序列化技术通过对计算侧、网络侧和能耗侧进行综合建模，通过最优化方法和智能决策策略实现了智能的序列化方案，使计算侧和网络侧总时延降至8ms，缩减60%+。 

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

图3 智能序列化技术

**（2）极简传输协议（Minimalist Transport Protocol）**

随着文件及流媒体文件对传输效率和速度提出更高的要求，用户对全场景传输效率的需求进一步提升，正是为了适应这样的新要求，极简传输协议应运而生。

极简传输协议，将OSI模型中表示层、会话层、传输层和网络层协议栈精简为一层，通过报文简化、包头简化、交互简化，场景感知的缓冲机制等方式，提升有效的传输荷载、突破 TCP/IP 协议的传输限制，带来了传输效率与速度的跨越式提升，是分布式软总线的核心技术之一。相较传统协议，时延缩减70%+。

![图片](HDC2021技术分论坛：盘点分布式软总线数据传输技术中的黑科技.assets/640.webp)

图4 极简传输协议

**3. 高效动态资源调度技术（Dynamic Resource Scheduling）**

多设备协同场景下，设备间竞争、干扰和冲突避让等机制严重限制了空口的原有能力，带宽急剧降低，同时时延不可预期。就这个问题，软总线团队在多设备场景上长期深耕，推出了高效动态资源调度技术。

![图片](HDC2021技术分论坛：盘点分布式软总线数据传输技术中的黑科技.assets/640.webp)

图5 多设备协同场景

**高效动态资源调度技术包括以下三项子技术：** 

**（1）秩序化组网技术**

秩序化组网，顾名思义，这是一种确定性网络技术。秩序化组网技术通过秩序化自组织网络的秩序化特性，将原本“无序”的网络变得“有序”，通过有序可控的调度实现空口资源最优化利用，从而带来空口利用率的极大提升，实现了空口资源利用的最优调度策略。

**（2）“超级终端”拓扑数传技术**

用户看到某个设备便可以操控和使用它（“所见即所用”）一直是用户的深层渴望。受传统的P2P角色限制，物联网设备间并不能实现真正意义的“所见即所用”，这极大限制了资源的利用，严重影响了互联背景下的用户体验。

“超级终端”拓扑数传技术，通过建立HML私有协议，使超级终端内部设备都成为可支配的计算和传输资源，实现了“所见即所用”模式。设备之间的隔阂渐趋消失，满足了用户对设备使用体验的深层渴望。

**（3）“超级终端”智能调度技术**

超级终端内不同设备的通信和计算能力不同，如何合理配置这些资源，实现“能者多劳”和发挥“一技之长”。让通信能力强的资源用在通信上，计算能力强或专业计算的资源帮助计算劣势的资源完成复杂高负荷的计算，成为调度技术的主要关注问题。

在秩序化组网的有序性基础上，“超级终端”智能调度技术，通过软件SDK和CPU的智能调度策略和算法，实现了传输和计算资源的合理分配，最大发挥“能力强”和“专业硬”的设备通信和计算能力。





**三、总结与展望**



在万物互联时代，如何极致化利用资源，最大化发挥资源能力和价值，一直是分布式软总线数据传输技术的探索思路和目标。未来数据传输技术还会持续挖掘新场景下更加高效快速、更加可靠的传输能力，持续为超级终端、为物联网世界注入更强大的传输技术和能力。

***\*【\*\*HDC技术论坛PPT，\*\**\**\**\*点击阅读原文\*\*下载\*\*\*\*】\****